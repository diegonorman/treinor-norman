<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Teste Cron√¥metro</title>
    <style>
        .timer-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .timer-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }
        .timer-display {
            font-size: 48px;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <button onclick="startTimer('15s')">Teste 15 segundos</button>
    
    <script>
        function startTimer(restTime) {
            const timeInSeconds = parseRestTime(restTime);
            console.log('Iniciando timer com:', timeInSeconds, 'segundos');
            
            const modal = document.createElement('div');
            modal.className = 'timer-modal';
            modal.innerHTML = `
                <div class="timer-content">
                    <div class="timer-display" id="timer-display">${formatTime(timeInSeconds)}</div>
                    <div class="timer-label">Tempo de descanso</div>
                    <button onclick="closeTimer()">Fechar</button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            let remainingTime = timeInSeconds;
            
            const timerInterval = setInterval(() => {
                remainingTime--;
                console.log('Tempo restante:', remainingTime);
                
                const display = document.getElementById('timer-display');
                if (display) {
                    display.textContent = formatTime(remainingTime);
                }
                
                if (remainingTime <= 0) {
                    clearInterval(timerInterval);
                    alert('Acabou!');
                    modal.remove();
                }
            }, 1000);
            
            window.currentTimer = timerInterval;
        }
        
        function closeTimer() {
            if (window.currentTimer) {
                clearInterval(window.currentTimer);
            }
            const modal = document.querySelector('.timer-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        function formatTime(seconds) {
            if (seconds <= 0) return '00:00';
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function parseRestTime(restTime) {
            const match = restTime.match(/(\d+)/);
            return match ? parseInt(match[1]) : 60;
        }
    </script>
</body>
</html>
